## コメント規約（Kanshichan）

このドキュメントは、ソースコードの可読性・保守性を高めるためのコメント作法を定めます。実装は読みやすいコードを第一とし、コメントは「読み手が迷う箇所」に限定して付与します。

### 基本原則
- 必要最小限・高密度: 誰でもわかる処理には書かない。書く場合は情報価値を高く。
- なぜ(Why)を書く: 仕様背景・設計判断・トレードオフ・既知の制約を明記。どうやって(How)はコードで表現。
- 近接配置: 説明対象コードの直前に置く。離れた場所に散らさない。
- 乖離防止: 仕様変更時はコメントも同時更新。陳腐化したコメントは削除。

### 推奨コメントの種類
1. ファイル/モジュール冒頭の概要
   - 責務、外部依存（I/O、API、環境依存）を1-3行で要約。
2. 複雑なアルゴリズム/後処理
   - 計算量、精度パラメータ、前提条件、境界ケースの扱い。
3. 重要な設計判断/回避策
   - 代替案と比較、採用理由、既知の副作用、将来の拡張余地。
4. 公開API（関数/クラス）
   - 入出力、例外、スレッド/非同期の注意点、使用例（簡潔に）。

### 非推奨のコメント
- コードから自明な処理の逐語説明
- コメントアウトした大きなブロック（履歴はGitに任せる）
- TODOの放置（即時対応できない場合はIssue化してリンク）

### 記法スタイル
- 言語: 日本語（固有名詞/API名は英語併記可）
- トーン: 事実ベース・簡潔。口語表現や絵文字は避ける（UI文言は除く）。
- フォーマット例（JS/TS）

```js
/**
 * YOLOv11の出力を解析し、NMSで重複を除去して検出結果を返す。
 * - dims: [1, 84, 8400] を前提（84 = 4 bbox + 80 classes）
 * - confidenceThreshold / iouThreshold に依存
 * @param {OrtInferenceResults} results ONNX Runtime の推論結果
 * @param {number} originalWidth 入力画像の実幅
 * @param {number} originalHeight 入力画像の実高
 * @returns {Array<{class:string, confidence:number, bbox:[number,number,number,number]}>}
 */
```

### セキュリティ/プライバシー配慮
- APIキーや秘匿情報は書かない。推測可能な記述も避ける。
- 個人情報・映像データの扱い方針は実装コメントではなく別ドキュメントで管理。

### Electron/レンダラ特有の注意
- IPC境界の責務分離をコメントで明示（メイン vs レンダラ vs preload）。
- Node.jsネイティブ依存（`canvas`/`onnxruntime-node`）の前提やビルド要件はファイル冒頭に記載。

### 変更時の運用
- 変更PRではコメントの追加/更新/削除をレビュー観点に含める。
- コメントが必要なほど複雑になった場合は、まず構造の簡素化を検討する。

